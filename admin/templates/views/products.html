{% extends 'admin_base.html' %}

{% block head %}
<title>Products - Admin Panel</title>
{% endblock %}

{% block content %}
<div class="main">
    {% if action == None %}
        <h3 class="title">Products</h3>
        <div class="product-list">
            {% for product in products %}
                <div class="product">
                    <div class="information">
                        <img class="image" src="/static/images/uploads/{{product.images[0]}}" alt="{{product.name}}"/>
                        <p class="title">{{ product.name }}</p>
                    </div>
                    <div class="actions">
                        <a class="link" href="#" target="_blank">View</a>
                        <a class="link" href="#">Edit</a>
                    </div>
                </div>
            {% endfor %}
        </div>

    {% elif action == 'add' %}
        <h3 class="title">Create product</h3>
        {% with messages = get_flashed_messages(with_categories=True) %}
            {% if messages %}
                {% for category, message in messages %}
                    {% if category == 'info' %}
                        <div class="banner bg-green">{{ message }}</div>
                    {% elif category == 'error' %}
                        <div class="banner bg-red"><b>Error:</b> {{ message }}</div>
                    {% else %}
                        <div class="banner bg-blue">{{ message }}</div>
                    {% endif %}
                {% endfor %}
            {% endif %}
        {% endwith %}
        <form class="form" action="" method="post" accept-charset="utf-8" enctype=multipart/form-data>
            {{ form.name(placeholder="Product name") }}
            {{ form.information(placeholder="Product information") }}
            {{ form.category(placeholder="Category") }}
            {{ form.stock(placeholder="Stock") }}
            {{ form.price(placeholder="Price") }}
            <p>{{ form.visible() }} {{ form.visible.label }}</p>
            {{ form.csrf_token }}
            {{ form.images }}
            {{ form.submit() }}
        </form>

  {% else %}
      <h3 class="title">Edit Product</h3>

  {% endif %}
</div>
<div class="tools">
    <h3 class="title">Tools</h3>
    <a class="button bg-g-blue" href="/admin/products/new-product/">New product</a>
    <a class="button bg-g-cyan" href="#">Visible products</a>
    <a class="button bg-g-cyan" href="#">Invisible products</a>
    <a class="button bg-g-orange" href="#">Trends</a>
    <a class="button bg-g-black" href="#">Products in carts</a>
    <a class="button bg-g-black" href="#">Paper bin</a>
</div>
{% endblock %}
