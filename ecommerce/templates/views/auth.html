{% extends 'base.html' %}

{% block head %}
<title>Auth</title>
{% endblock %}

{% block content %}
<div class="auth">
    <div class="form-container">
        {% for error in get_flashed_messages(category_filter=["error"]) %}
            <div class="banner bg-red white">{{ error }}</div>
        {% endfor %}

        {% if form_view == 'login' %}
            {% for error in form.email.errors  %}
                <div class="banner bg-red white">{{ error }}</div>
            {% endfor %}

            {% for error in form.email.errors %}
                <div class="banner bg-red white">{{ error }}</div>
            {% endfor %}

            <form class="form" action="" method="post" accept-charset="utf-8">
                <h1>Sign in</h1>
                {{ form.email(placeholder="Email") }}
                {{ form.password(placeholder="Password") }}
                <p>{{ form.remember() }} {{ form.remember.label }}</p>
                {{ form.csrf_token }}
                {{ form.submit() }}
            </form>
            <p>You don't have account? <a href="/register">Create account</a></p>
        {% endif %}


        {% if form_view == 'register' %}
            {% for error in form.email.errors %}
                <div class="banner bg-red white">{{ error }}</div>
            {% endfor %}

            {% for error in form.password.errors %}
                <div class="banner bg-red white">{{ error }}</div>
            {% endfor %}

            {% for error in form.password2.errors %}
                <div class="banner bg-red white">{{ error }}</div>
            {% endfor %}

            <form class="form" action="" method="post" accept-charset="utf-8">
                <h1>Register</h1>
                {{ form.email(placeholder="Email") }}
                {{ form.password(placeholder="Password") }}
                {{ form.password2(placeholder="Repeat password") }}
                {{ form.csrf_token }}
                {{ form.submit() }}
            </form>
            <p>You have account? <a href="/login">Sign in</a></p>
        {% endif %}
    </div>
</div>
{% endblock %}
